<div class="container">

    <!---JOB DATA EDIT DELETE OPTION FOR THE CUSTOMER WHO CREATED IT---> 
  {{#unless isService}}
  <div class="editDeleteBtn right">
    <button class="jobEditBtn btn-floating btn-large hoverable green" title="Edit"><i class="material-icons left">edit</i></button>
    <button class="jobDeleteBtn btn-floating btn-large hoverable red" title="Delete"><i class="material-icons left">delete</i>DELETE</button>
  </div>

  <!---EDIT FORM FOR JOB--->
  <div class="container" id="editJobForm">
    <form class="editJobForm">
      <div>
        <h5 class="blue-text center">Edit Job Request</h5>
      </div>
      <div>
        <label for='jobEditTitle'>TITLE: </label>
        <input type='text' id='jobEditTitle' />
      </div>
      <div>
        <label for='jobEditDescription'>DESCRIPTION: </label>
        <textarea id="jobEditDescription" class="materialize-textarea"></textarea>
      </div>
      <div>
        <label for='jobEditAddress'>ADDRESS: </label>
        <textarea class="materialize-textarea" id='jobEditAddress'></textarea>
      </div>
      <div>
        <label for='jobEditContact'>CONTACT: </label>
        <input type='text' id='jobEditContact' />
      </div>
      <div>
        <button class="editJobSubmitBtn btn green" type="submit">Submit</button>
        <button class="editJobCancelBtn btn red-text transparent" >Cancel</button>
      </div>
    </form>         
  </div>
  {{/unless}}

  <!---JOB DATA VIEW FOR ALL--->  
  <h4 class="center red-text"><u>{{jobData.job_title}}</u></h4>

  <div class="row">
  <div class="col s12">
  <h5 class="blue-text center">Job Details</h5>
  <table class="centered card">
    <thead class="grey lighten-3">
      <tr>
        <th>Description</th>
        <th>Status</th>
        <th>Created Date</th>
        <th>Last Updated</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>
          {{#each jobData.job_text as |text|}}
          {{text}}
          {{/each}}
        </td>
        <td>{{jobData.status.status_text}}</td>
        <td>{{format_dates jobData.createdAt}}</td>
        <td>{{format_dates jobData.updatedAt}}</td>
      </tr>
    </tbody>
  </table>
  </div>
  </div>

  <h5 class="blue-text center">Customer Details</h5>
  <table class="centered card">
    <thead class="grey lighten-3">
      <tr>
        <th>Name</th>
        <th>Address</th>
        <th>Phone No.</th>
        <th>Email</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>{{jobData.user.username}}</td>
        <td>{{jobData.job_address}}</td>
        <td>{{jobData.job_contact}}</td>
        <td>{{jobData.user.email}}</td>
      </tr>
    </tbody>
  </table>

  <!---ORDER PAGE APPLICATION VIEW FOR SERVICE PROVIDER--->      
  {{#if isService}}
  <!---ORDER PAGE APPLICATION VIEW FOR SERVICE PROVIDER IF ALREADY APPLIED FOR THE JOB--->  
  {{#if applied}}

  <h5 class="blue-text center">Your Application</h5>

  <table class="centered">
    <thead class="grey lighten-3">
      <tr>
        <th>Quoted Cost</th>
        <th>Order Number</th>
        {{!-- <th>Application Status</th> --}}
        <th>Start Date</th>
        <th>Completed Date</th>
        <th>Applied On</th>
        <th>Last Updated</th>
      </tr>
    </thead>

    <tbody>
      <tr>
        <td>${{yourApplication.cost}}</td>
        <td class="AssignOrderNumber">{{yourApplication.order_number}}</td>
        {{!-- <td></td> --}}
        <td>
          {{#if yourApplication.start_date}}
          {{yourApplication.start_date}}
          {{/if}}
        </td>
        <td>
          {{#if yourApplication.completed_date}}
          {{yourApplication.completed_date}}
          {{/if}}
        </td>
        <td>{{format_dates yourApplication.createdAt}}</td>
        <td>{{format_dates yourApplication.updatedAt}}</td>
      </tr>
    </tbody>
  </table>
{{!-- 
          <ul>
            <li><p><b>Quoted Cost: </b>${{yourApplication.cost}}</p></li>
            <li><p><b>Order number: </b><span class="AssignOrderNumber">{{yourApplication.order_number}}</span></p></li>
            <li class="col s12 center"><h6 class="blue-text">Application status</h6></li>
            <li>
              {{#if yourApplication.start_date}}
              <p><b>Start date: </b>{{yourApplication.start_date}}</p>
              {{/if}}
            </li>
            <li>
            {{#if yourApplication.completed_date}}
            <p><b>Completed date: </b>{{yourApplication.completed_date}}</p>
            {{/if}}
            </li>
            <li><p><b>Applied on: </b>{{format_dates yourApplication.createdAt}}</p></li>
            <li><p><b>Last updated: </b>{{format_dates yourApplication.updatedAt}}</p></li>
          </ul> --}}

<div class="editDeleteBtn center">
  <button class="editAssignBtn btn green">EDIT</button>
  <button class="deleteAssignBtn btn red">DELETE</button>
</div>
          
<!---EDIT FORM FOR SERVICE PROVIDER IF THEY CREATED IT--->
<div class="container" id="editAssignForm">
  <form class="editAssignForm">
    <div>
      <h5 class="blue-text center">Edit Job Request</h5>
    </div>
    <div>
      <label for='assignEditCost'>COST: </label>
      <input type='text' id='assignEditCost' />
    </div>
    <div>
      <label for='assignEditStartDate'>START DATE: </label>
      <input type='text' id='assignEditStartDate' />
    </div>
    <div>
      <label for='assignEditCompleteDate'>COMPLETE DATE: </label>
      <input type='text' id='assignEditCompleteDate' />
    </div>
    <div>
      <button class="editAssignSubmitBtn btn green" type="submit">Submit</button>
      <button class="editAssignCancelBtn btn red-text transparent" >Cancel</button>
    </div>
  </form>         
</div>
          
<!---ORDER PAGE APPLICATION VIEW FOR SERVICE PROVIDER IF NOT APPLIED FOR THE JOB--->
{{else}}

<div class="center">
  <button class="applyJobBtn btn green">Apply</button>
</div>

<div class="container" id="applyJobForm">
  <form class="applyJobForm">
              <div>
                <label for='assignmentCost'>COST: </label>
                <input type='text' id='assignmentCost' />
              </div>
              <div>
                <label for='assignmentOrderNo'>ORDER#: </label>
                <input type='text' id='assignmentOrderNo' />
              </div>
              <div>
                <button class="applyJobSubmitBtn btn green" type="submit">Submit</button>
                <button class="applyJobCancelBtn btn red-text transparent" >Cancel</button>
              </div>
            </form>         
          </div>
          <script src="/assets/javascript/applyNewJob.js"></script>
        {{/if}}

<!---ORDER PAGE APPLICATION VIEW FOR CUSTOMERS---> 
{{else}}

<h5 class="blue-text center">Application for the order</h5>

<!---ORDER PAGE APPLICATION VIEW FOR CUSTOMERS IF THEY HAVE APPROVED ANY ASSIGNMENT--->
{{#if approval}}
<table class="centered card">
  <thead class="grey lighten-3">
    <tr>
      <th>Service Provider</th>
      <th>Service Type</th>
      <th>Order Number</th>
      <th>Cost</th>
      <th>Status/Action</th>
    </tr>
  </thead>

  <tbody>
    {{#each jobData.assignments as |assignment|}}
    <tr>
      <td>{{assignment.user.username}}</td>
      <td>{{assignment.user.service.service_type}}</td>
      <td class="orderNumber">{{assignment.user.service.service_type}}</td>
      <td>${{assignment.cost}}</td>
      <td>
        {{#if assignment.approved_status}}
        <button class="grey btn">ASSIGNED</button>
        {{else}}
        <button class="red btn">REJECTED</button>
        {{/if}}
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>
          {{!-- <ul>
          {{#each jobData.assignments as |assignment|}}
            <li><p><b>Service provider: </b>{{assignment.user.username}}</p></li>
            <li><p><b>Service type: </b>{{assignment.user.service.service_type}}</p></li>
            <li><p><b>Order number: </b><span class="orderNumber">{{assignment.user.service.service_type}}</span></p></li>
            <li><p><b>Cost: </b>${{assignment.cost}}</p></li>
            {{#if assignment.approved_status}}
            <li class="col s12 center"><button class="grey btn">ASSIGNED</button></li>
            {{else}}
            <li class="col s12 center"><button class="red btn">REJECTED</button></li>
            {{/if}}
          {{/each}}
          </ul> --}}

<!---ORDER PAGE APPLICATION VIEW FOR CUSTOMERS IF THEY HAVE NOT APPROVED ANY ASSIGNMENT--->
{{else}}
<table class="centered card">
  <thead class="grey lighten-3">
    <tr>
      <th>Service Provider</th>
      <th>Service Type</th>
      <th>Order Number</th>
      <th>Cost</th>
      <th>Status/Action</th>
    </tr>
  </thead>

  <tbody>
    {{#if jobData.assignments}}
    {{#each jobData.assignments as |assignment|}}
    <tr>
      <td>{{assignment.user.username}}</td>
      <td>{{assignment.user.service.service_type}}</td>
      <td class="orderNumber">{{assignment.order_number}}</td>
      <td><button class="approveAssignmentBtn">APPROVE</button></td>
    </tr>
    {{/each}}
    {{else}}
    <tr><td>NO APPLICATIONS</td></tr>
    {{/if}}
  </tbody>
</table> 

  {{#if jobData.assignments}}
  <script src="/assets/javascript/approveAssignment.js"></script>
  {{/if}}
{{/if}}
        {{!-- <ul>
          {{#each jobData.assignments as |assignment|}}
          <li><p><b>Service provider: </b>{{assignment.user.username}}</p></li>
          <li><p><b>Service type: </b>{{assignment.user.service.service_type}}</p></li>
          <li><p><b>Order number: </b><span class="orderNumber">{{assignment.order_number}}</span></p></li>
          <li><p><b>Cost: </b>${{assignment.cost}}</p></li>
          <li class="col s12 center"><button class="approveAssignmentBtn btn green">APPROVE</button></li>
          {{/each}}
        </ul>
          {{#if jobData.assignments}}
          <script src="/assets/javascript/approveAssignment.js"></script>
          {{/if}}
        {{/if}} --}}
  {{/if}}
  <p class="alertMessage"></p>
</div>


<script src="/assets/javascript/editDeleteJob.js"></script>
<script src="/assets/javascript/editDeleteAssignment.js"></script>